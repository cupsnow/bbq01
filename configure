. .builder/func.sh

BOARD=qemu

help() {
cat <<EOF
  USAGE
    $0 [OPTION]
  
  OPTION
    -h, --help           show this help
    -b, --board=[BOARD]  choose system [*qemu, bb]

EOF
}

log_debug "start parse argument"
arg=
for i in $@; do
  if [ -n "$arg" ]; then
    log_verbose "$arg argument $i"
    opt=$arg
    arg=$i
  else
    opt=$i
  fi

  case "$opt" in
  -h | --help)
    help $0
    exit 0
    ;;
  -b | --board)
    if [ -n "$arg" ]; then
      board=$arg
      arg=
    else
      arg=$opt
    fi
    ;;
  *)
    log_error "unknown argument $opt" 
    exit 1
    ;;
  esac
done

echo -n "" > config.mk

log_info "set BOARD=$BOARD"
echo "BOARD=$BOARD" >> config.mk
